@model SubscriptionPlans;

<style>
    #purchaseModal {
        display: none;
        position: fixed;
        top: 70%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        width: 60%; 
        max-width: 400px; 
   
        border-radius: 20px;
    }

    .modal-content {
        background-color: #1a1a1a;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        color:white;
    }

    .close {
        color: #ffffff;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }

        .close:hover {
            color: #ffffff;
        }

    button {
        background-color: #e50000;
        color: #ffffff; 
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }

        button:hover {
            background-color: green;
        }
</style>



<div style="margin-left:120px;margin-top:50px;">
    <h1 style="color:white;">Choose the plan that's right for you</h1>
    <p style="color:#999999">Join StreamVibe and select from our flexible subscription options tailored to suit your viewing preferences. Get ready for non-stop entertainment!</p>
</div>
<div style="display:flex;gap:100px; align-items:flex-start;flex-wrap:wrap;">


 
        
       
       

  
        
        <input type="hidden" name="PlanType" value="@Model.PlanType" />
            <div style="display:flex; gap:50px; align-items:center;">
                <div style="background:#262626; border-radius:10px; padding: 20px; text-align: center; color:white; max-width: 400px;margin-left:120px; margin-top:30px;">
                    <h2>@Model.PlanType</h2>
                    <p>Description: Enjoy an extensive library of movies and shows, featuring a range of content, including recently released titles.</p>
                    <p>@Model.PlanPrice<span style="font-size: 12px;">/Month</span></p>

                @if (ViewData["SubscriptionAdded"] != null)
                {
                    <button type="submit" style="background-color: red; color: #fff; padding: 10px 20px; border: none; cursor: pointer; border-radius:5px;">
                        Delete Plan
                    </button>
                }
                else
                {
                     @if (Context.Request.Cookies["UserId"] != null)
                    {
                    <button onclick="openModal()" style="background-color: green; color: #fff; padding: 10px 20px; border: none; cursor: pointer; border-radius:5px;">
                            Purchase Plan
                        </button>
                    }
                    else
                    {
                        <button disabled style="background-color: #ff0000; color: #fff; padding: 10px 20px; border: none; cursor: pointer; border-radius:5px;">
                            <a style="text-decoration:none; color:white;" asp-action="Register" asp-controller="Register">Log In To Purchase</a>
                        </button>
                    }
                }

                   
                </div>
            </div>



 










    <div class="bg-dark text-white p-4" style="margin-top: 30px; margin-left: 100px; margin-right: 100px; cursor: pointer;">
        <div class="table-responsive">
            <table class="table table-bordered text-sm">
                <thead class="border-bottom" style="color: white;">
                    <tr class="border-bottom">
                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Features</th>
                        <th  class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                            @Model.PlanType
                        </th>
                    </tr>
                </thead>
                <tbody style="color: white;">
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Price</td>
                        <td class="p-4 align-middle">@Model.PlanPrice/Month</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Content</td>
                        <td class="p-4 align-middle">Access to a wide selection of movies and shows, including some new releases.</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Devices</td>
                        <td class="p-4 align-middle">Watch on one device simultaneously</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Free Trial</td>
                        <td class="p-4 align-middle">7 Days</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Cancel Anytime</td>
                        <td class="p-4 align-middle">Yes</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">HDR</td>
                        <td class="p-4 align-middle">No</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Dolby Atmos</td>
                        <td class="p-4 align-middle">No</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Ad-</td>
                        <td class="p-4 align-middle">No</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Offline Viewing</td>
                        <td class="p-4 align-middle">No</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="p-4 align-middle">Family Sharing</td>
                        <td class="p-4 align-middle">No</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<form asp-controller="Subscription" asp-action="AddSubscription" method="post">
    <div id="purchaseModal" class="modal">
        <div class="modal-content">
           <input hidden value="@Model.PlanType" name="PlanType" />
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Confirm Purchase</h2>
            <p>Are you sure you want to purchase the @Model.PlanType (@Model.PlanPrice) plan?</p>
            
            <button type="submit" >Yes, Purchase</button>
        </div>
    </div>
</form>



<script>
    function openModal() {
        var modal = document.getElementById('purchaseModal');
        modal.style.display = 'block';
    }

    function closeModal() {
        var modal = document.getElementById('purchaseModal');
        modal.style.display = 'none';
    }

</script>
